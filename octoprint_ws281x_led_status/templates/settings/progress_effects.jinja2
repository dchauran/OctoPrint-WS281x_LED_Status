{% import "macros/docs.jinja2" as docs %}
{% import "macros/binding.jinja2" as binding with context %}


<h5>Progress effects {{ docs.help_icon("configuration/progress-effects") }}</h5>
<form class="form-horizontal">
    {{ labelled_checkbox("strip.reverse", "Reverse progress bar direction") }}
    <hr>
    {{ effect("progress_print") }}
    <hr>
    {{ effect("progress_heatup","Heating Progress") }}
    <br>
    <div class="form-inline" style="margin-bottom: 10px;" data-bind="visible: {{ binding.effect_binding("progress_heatup.enabled") }}">
        {{ labelled_checkbox("effects.progress_heatup.bed_enabled", "Track bed heating") }}
        {{ labelled_checkbox("effects.progress_heatup.tool_enabled", "Track tool heating") }}
        <label for="ws_progress_heatup_tool" class="checkbox inline" data-bind="visible: {{ binding.effect_binding("progress_heatup.tool_enabled") }}">
            Index of Tool to track:
        </label>
        <div class="input-prepend">
            <span class="add-on">T</span>
            <input type="number" id="ws_progress_heatup_tool" class="input-mini" data-bind="value: {{ binding.effect_binding("progress_heatup.tool_key") }}, visible: {{ binding.effect_binding("progress_heatup.tool_enabled") }}">
        </div>
    </div>
    <hr>
    {{ effect("progress_cooling", "Cooling Progress") }}
    <div class="form-inline" style="margin-top: 0.5rem;" data-bind="visible: {{ binding.effect_binding("progress_cooling.enabled") }}">
        <label for="ws_progress_cooling_bed_tool" class="inline">Track cooling on bed or tool:</label>
        <select id="ws_progress_cooling_bed_tool" class="input-large" data-bind="value: {{ binding.effect_binding("progress_cooling.bed_or_tool") }}">
            <option value="tool">Track Tool</option>
            <option value="bed">Track Bed</option>
        </select>
    </div>
    <div class="form-inline" style="margin-top: 5px;" data-bind="visible: {{ binding.effect_binding("progress_cooling.enabled") }}">
        <label class="inline" for="ws_temp_threshold">Cooling temperature threshold</label>
        <div class="input-append">
            <input id="ws_temp_threshold" class="input-medium" type="number" data-bind="value: {{ binding.effect_binding("progress_cooling.threshold") }}">
            <span class="add-on">C</span>
        </div>
        <p class="help-block">
            When the temperature drops below this value, cooling tracking will stop. Note that if this is
            <strong><em class="text-warning">below</em></strong> room temperature, cooling tracking will
            <strong class="text-error">never stop.</strong>
        </p>
    </div>
    <hr>
    <div class="form-inline">
        <label class="inline" for="ws_temp_start">Set base temperature</label>
        <div class="input-append">
            <input id="ws_temp_start" min="0" class="input-medium" type="number" data-bind="value: {{ binding.bind_setting("progress_temp_start") }}">
            <span class="add-on">C</span>
        </div>
        <p class="help-block">Heating/cooling progress bar will make '0' the temperature specified. Suggested value is just below room temperature, so that the progress bar starts closer to the end of the strip.</p>
    </div>
</form>
